# Plan 12-01: CCR Command Formatting Helper

## Goal

Extract CCR command formatting into a centralized helper function to ensure consistent command structure across all workflow modules.

## Context

All GSD commands executed via CCR need to follow the pattern:

```
/github-actions-testing and now trigger command /gsd:{command}
```

This loads the GitHub Actions testing skill first, providing CI/CD context, then triggers the actual GSD command.

## Tasks

### Task 1: Create CCR Command Helper Module

**Files:** `src/llm/ccr-command.js`

**Changes:**

- Create `formatCcrCommand(gsdCommand)` - formats command with prefix
- Create `formatCcrCommandWithOutput(gsdCommand, outputPath)` - adds output redirect
- Document the pattern in JSDoc comments

**Verification:** Helper generates correct command string

### Task 2: Update Phase Planner Module

**Files:** `src/milestone/phase-planner.js`

**Changes:**

- Import `formatCcrCommandWithOutput` from ccr-command.js
- Replace inline command string with helper call
- Remove hardcoded pattern

**Verification:** Phase planning still works with new helper

### Task 3: Update Phase Executor Module

**Files:** `src/milestone/phase-executor.js`

**Changes:**

- Import `formatCcrCommandWithOutput` from ccr-command.js
- Replace inline command string with helper call
- Remove hardcoded pattern

**Verification:** Phase execution still works with new helper

### Task 4: Update Milestone Completer Module

**Files:** `src/milestone/milestone-completer.js`

**Changes:**

- Import `formatCcrCommandWithOutput` from ccr-command.js
- Replace inline command string with helper call
- Remove hardcoded pattern

**Verification:** Milestone completion still works with new helper

### Task 5: Add Tests and Mock Helper in Existing Tests

**Files:** `src/llm/ccr-command.test.js`, `src/milestone/*.test.js`

**Changes:**

- Create tests for helper functions (5 tests)
- Mock helper in phase-planner.test.js
- Mock helper in phase-executor.test.js
- Mock helper in milestone-completer.test.js

**Verification:** All 363 tests pass

## Dependencies

- Phase 11 (output parsing improvements)

## Success Criteria

1. Single source of truth for CCR command format
2. All workflow modules use helper function
3. Pattern easily changeable in one place
4. All tests pass with mocked helper
